<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Z confidence interval for a mean • distributions</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Z confidence interval for a mean">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">distributions</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro-to-hypothesis-testing.html">Intro to hypothesis testing</a>
    </li>
    <li>
      <a href="../articles/one-sample-sign-tests.html">One sample sign tests</a>
    </li>
    <li>
      <a href="../articles/one-sample-t-confidence-interval.html">T confidence interval for a mean</a>
    </li>
    <li>
      <a href="../articles/one-sample-t-test.html">One sample T-tests</a>
    </li>
    <li>
      <a href="../articles/one-sample-z-confidence-interval.html">Z confidence interval for a mean</a>
    </li>
    <li>
      <a href="../articles/one-sample-z-test-for-proportion.html">One sample Z-tests for a proportion</a>
    </li>
    <li>
      <a href="../articles/one-sample-z-test.html">One sample Z-tests</a>
    </li>
    <li>
      <a href="../articles/paired-tests.html">Paired tests</a>
    </li>
    <li>
      <a href="../articles/two-sample-z-test.html">Two sample Z-tests</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/alexpghayes/distributions">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Z confidence interval for a mean</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/alexpghayes/distributions/blob/master/vignettes/one-sample-z-confidence-interval.Rmd"><code>vignettes/one-sample-z-confidence-interval.Rmd</code></a></small>
      <div class="hidden name"><code>one-sample-z-confidence-interval.Rmd</code></div>

    </div>

    
    
<p>The normal distribution also comes up frequently when calculating confidence intervals for sample means. Let’s calculate a 88 percent confidence interval for the same data from <code><a href="../articles/one-sample-z-test.html">vignette("one-sample-z-test")</a></code>, which was:</p>
<p><span class="math display">\[
  3, 7, 11, 0, 7, 0, 4, 5, 6, 2
\]</span></p>
<p>Again we will assume that <span class="math inline">\(\sigma = 2\)</span>. If you would like to see how to calculate a confidence interval for the mean of a single sample when you don’t know the population standard deviation <span class="math inline">\(\sigma\)</span>, see <code><a href="../articles/one-sample-t-confidence-interval.html">vignette("one-sample-t-confidence-interval")</a></code>.</p>
<p>Recall that a confidence interval for the mean based off the normal distribution is valid when:</p>
<ol style="list-style-type: decimal">
<li>The data comes from a normal distribution.</li>
<li>We have lots of data. How much? Many textbooks use 30 data points as a rule of thumb.</li>
</ol>
<p>In the Z-test example we verified that the sample seems to come from a normal distribution using a quantile-quantile plot (QQ-plot).</p>
<p>The formula for a confidence interval with confidence coefficient <span class="math inline">\(1 - \alpha\)</span> (in our case this is 0.88) is then:</p>
<p><span class="math display">\[
  \left( \bar x + z_{\alpha / 2} \cdot \frac{\sigma}{\sqrt{n}},
  \bar x + z_{1 - \alpha / 2} \cdot \frac{\sigma}{\sqrt{n}} \right)
\]</span></p>
<p>Where <span class="math inline">\(z_\alpha\)</span> stands for the alpha-ith quantile of a standard normal distribution. To get a quantile we need to take the inverse of the c.d.f. so you may also see <span class="math inline">\(z_\alpha\)</span> written as <span class="math inline">\(\Phi^{-1}(\alpha)\)</span>, where <span class="math inline">\(\Phi\)</span> is the c.d.f. of the standard normal. Since the standard normal distribution is symmetric around zero, this is exactly equivalent to</p>
<p><span class="math display">\[
  \left( \bar x - z_{1 - \alpha / 2} \cdot \frac{\sigma}{\sqrt{n}},
  \bar x + z_{1 - \alpha / 2} \cdot \frac{\sigma}{\sqrt{n}} \right)
\]</span></p>
<p>which may look slightly more familiar. Having trouble seeing what the difference is? Look at the subscript for <span class="math inline">\(z\)</span>. Let’s go ahead and calculate this out in R. Since our confidence coefficient is 0.88 (corresponding to an 88 percent confidence interval) we have:</p>
<p><span class="math display">\[
  0.88 = 1 - \alpha
\]</span></p>
<p>so that <span class="math inline">\(\alpha = 0.12\)</span>. Now we can get started.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(distributions)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co"># read in the data</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">x &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">0</span>, <span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">n &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(x)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co"># make a standard normal r.v.</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">Z &lt;-<span class="st"> </span><span class="kw"><a href="../reference/normal.html">Normal</a></span>(<span class="dv">0</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co"># first approach</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="../reference/quantile.html">quantile</a></span>(Z, <span class="fl">0.12</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span>) <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(n)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt; [1] 3.516675</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="../reference/quantile.html">quantile</a></span>(Z, <span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.12</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span>) <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(n)</a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; [1] 5.483325</span></a></code></pre></div>
<p>So our confidence interval using the first set of equations is (3.52, 5.48). Now we use the second set of equations:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># second approach</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x) <span class="op">-</span><span class="st"> </span><span class="kw"><a href="../reference/quantile.html">quantile</a></span>(Z, <span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.12</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span>) <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(n)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; [1] 3.516675</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(x) <span class="op">+</span><span class="st"> </span><span class="kw"><a href="../reference/quantile.html">quantile</a></span>(Z, <span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.12</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span>) <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(n)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; [1] 5.483325</span></a></code></pre></div>
<p>We get the same thing! Just like we expected.</p>
<p>There’s one last thing we need to address. You may not have seen either of the formulas for a Z-confidence interval that I wrote. You may have seen the formulas:</p>
<p><span class="math display">\[
  \left( \bar x - z_{\alpha / 2} \cdot \frac{\sigma}{\sqrt{n}},
  \bar x + z_{\alpha / 2} \cdot \frac{\sigma}{\sqrt{n}} \right)
\]</span></p>
<p>If this is you, you have my condolences, and your instructor probably hates you. Ask that they use lower quantile notation rather than upper quantile notation.</p>
<p>This looks almost like the second approach, except using <span class="math inline">\(z_{\alpha / 2}\)</span> instead of <span class="math inline">\(z_{1 - \alpha / 2}\)</span>. What this comes down to is whether or not <span class="math inline">\(z_{\alpha / 2}\)</span> represents a <em>lower quantile</em> or an <em>upper quantile</em>. For a lower quantile, you look at the p.d.f. and start integrating from negative infinity, stop when the integral equals <span class="math inline">\(\alpha\)</span>, and that take value to be the quantile. This is the only sane way to do things, although it requires being slightly more verbose so it can be inconvenient at times. Thus the upper quantile, in which case you do the same integration but start from positive infinity.</p>
<p>The difference is easiest to understand with a picture:</p>
<p><img src="one-sample-z-confidence-interval_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>Note that <code>distributions</code> <strong>always</strong> returns a lower quantile from the <code><a href="../reference/quantile.html">quantile()</a></code> function.</p>
<p>If you are truly unfortunate, your instructor may use <span class="math inline">\(z_{\alpha / 2}\)</span> to mean lower tail quantiles at times and upper tail quantiles at other times. If this is the case, only god can help you.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Alex Hayes, Ralph Moller-Trane.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
